# План Задачи: Устранение нехватки данных для MA(50)

## Цель
Обеспечить, чтобы `MarketDataService` всегда запрашивал достаточное количество данных для корректного расчета всех технических индикаторов, включая 50-периодную скользящую среднюю (MA), избегая срабатывания fallback-механизмов.

---
### ФАЗА 1: Изменение логики и обновление тестов
- **1.1:** В файле `src/market_data/market_data_service.py`, увеличить лимит запрашиваемых часовых свечей (`1h`) с 48 до 100. Это включает обновление всех связанных с этим значением вызовов, комментариев и логики.
- **1.2:** Проанализировать и обновить тесты (вероятно, в `tests/unit/market_data/` и `tests/integration/market_data/`), которые могут быть затронуты изменением лимита с 48 на 100, чтобы они соответствовали новой логике.
- **1.3:** Запустить все тесты (`tests/run_all_tests.py`) и убедиться, что они проходят успешно.

---
### ФАЗА 2: Валидация в реальном сценарии
- **2.1:** Запустить основной сценарий `examples/run_full_trading_cycle.py` для генерации нового лога.
- **2.2:** Проанализировать новый лог-файл и убедиться, что расчет MA(50) проходит без использования fallback-логики.

---
### ФАЗА 3: Завершение и документирование
- **3.1:** Обновить Memory Bank (`progress.md`, `decisionLog.md`), отразив исправление и его успешную валидацию.
- **3.2:** Сделать коммит с сообщением `fix(market_data): Increase kline limit to ensure MA50 calculation`.