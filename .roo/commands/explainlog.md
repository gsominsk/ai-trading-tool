---
description: "Brief description of what this command does"
---

Задача: Преобразовать "сырой" JSON-лог в человекочитаемый, аннотированный файл. Этот файл должен не просто комментировать операции, но и рассказывать историю выполнения программы, подсвечивая как достижения, так и существующие архитектурные пробелы.

Входные данные:

source_log.log: Файл с последовательностью "сырых" JSON-записей.
reference_log.log: Эталонный файл (logs/ai_trading_20250811_test.log), демонстрирующий стиль комментариев и, что самое важное, формат для описания архитектурных пробелов.
Требования к результату:

Формат "Комментарий -> Запись": Каждая JSON-запись из исходного лога должна предваряться комментарием, начинающимся с #.

Ясность комментариев: Комментарий должен простым языком объяснять бизнес-логику или техническую операцию, зафиксированную в JSON. Например:

# [Торговый Цикл] Шаг 1: Проверка наличия существующей позиции.
# [MarketDataService] Расчет RSI(14) завершен. Результат: 61.04.
Архитектурная аннотация (Ключевое требование): Используйте специальные блоки для документирования важных архитектурных моментов.

Для улучшений и исправлений:

Используйте заголовок: ✅ УЛУЧШЕНИЕ: [Название улучшения]
В комментарии объясните, что именно было исправлено.
Укажите, как следующая JSON-запись доказывает это исправление.
Пример:
# ====================================================================================================
# ✅ УЛУЧШЕНИЕ: Обогащенный рыночный контекст
# ====================================================================================================
# Следующая запись показывает, что 'fear_greed_index' теперь имеет значение '73',
# а 'btc_correlation' имеет значение '0.526'. Пробел в данных устранен.
#
{"timestamp": "...", "context": {"market_sentiment": {"btc_correlation": 0.526, "fear_greed_index": 73, ...}}}

txt


Для нерешенных проблем и заглушек:

Используйте заголовок: ❗ АРХИТЕКТУРНЫЙ ПРОБЕЛ: [Название проблемы]
В комментарии объясните, чего не хватает и где это должно было произойти.
Ссылайтесь на эталонный лог (reference_log.log) как на пример.
Пример:
# ====================================================================================================
# ❗ АРХИТЕКТУРНЫЙ ПРОБЕЛ: Управление рисками (ОТСУТСТВУЕТ)
# ====================================================================================================
# Лог показывает, что система переходит от принятия решения ИИ непосредственно к размещению ордера.
# Согласно архитектуре, здесь должен быть вызван 'RiskManagementService'.
# Этот сервис полностью отсутствует в текущем потоке выполнения.
#
{"timestamp": "...", "operation": "place_buy_order", ...}

txt


Полнота и честность: Финальный лог должен быть полным и честным отражением состояния системы. Не скрывайте существующие проблемы. Если вы исправили один архитектурный пробел, покажите это как "УЛУЧШЕНИЕ", но обязательно сохраните секции "АРХИТЕКТУРНЫЙ ПРОБЕЛ" для всех остальных нерешенных задач. Лог — это технический документ, а не маркетинговый материал.

Итоговый алгоритм:

Прочитать source_log.log и reference_log.log.
Идти по source_log.log запись за записью.
Для каждой записи писать осмысленный комментарий.
В ключевых точках потока выполнения вставлять блоки "УЛУЧШЕНИЕ" или "АРХИТЕКТУРНЫЙ ПРОБЕЛ", сверяясь со стилем reference_log.log.
Убедиться, что в итоговом файле отражены все улучшения и все оставшиеся пробелы.
Сохранить результат в новый файл.